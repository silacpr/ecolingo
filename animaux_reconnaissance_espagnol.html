<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel ="stylesheet" href="style.css"/>
    <title>EcoLingo</title>
</head>

<body>

    <header>
      <a href="index.html"><h1>ECOLINGO</h1></a>

        <div class="container">
          <div class="select">
            <select id="languageSelect">
                <option value="es">Espagnol</option>
                <option value="en">Anglais</option>
                <option value="fr">Français</option>
            </select>
          </div>
        </div>
    </header>

    <button id="btStart" onclick="start();">Start</button>

    <div class="lesbox">

<div class="flip-container" onclick="answer('Perro')">
  <div class="flipper" id="red">
    <div class="color3 box box-front">
      <img src="images/animaux/chien.png" alt="chien"/>
    </div>
  </div>
</div>

<div class="flip-container" onclick="answer('Gato')">
  <div class="flipper">
    <div class="color1 box box-front">
      <img src="images/animaux/chat.png" alt="chat"/>
    </div>
  </div>
</div>

<div class="flip-container" onclick="answer('Tortuga')">
  <div class="flipper">
    <div class="color4 box box-front">
      <img src="images/animaux/tortue.png" alt="tortue"/>
    </div>
  </div>
</div>

<div class="flip-container" onclick="answer('Pez')">
  <div class="flipper">
    <div class="color5 box box-front">
      <img src="images/animaux/poisson.png" alt="poisson"/>
    </div>
  </div>
</div>

<div class="flip-container" onclick="answer('Conejo')">
  <div class="flipper">
    <div class="color1 box box-front">
      <img src="images/animaux/lapin.png" alt="lapin"/>
    </div>
  </div>
</div>

<div class="flip-container" onclick="answer('Vaca')">
  <div class="flipper">
    <div class="color6 box box-front">
      <img src="images/animaux/vache.png" alt="vache"/>
    </div>
  </div>
</div>

<div class="flip-container" onclick="answer('Ardilla')">
  <div class="flipper">
    <div class="color4 box box-front">
      <img src="images/animaux/écureuil.png" alt="écureuil"/>
    </div>
  </div>
</div>

<div class="flip-container" onclick="answer('Mono')">
  <div class="flipper">
    <div class="color2 box box-front">
      <img src="images/animaux/singe.png" alt="singe"/>
    </div>
  </div>
</div>

<div class="flip-container" onclick="answer('Pájaro')">
  <div class="flipper">
    <div class="color5 box box-front">
      <img src="images/animaux/oiseau.png" alt="oiseau"/>
    </div>
  </div>
</div>

<div class="flip-container" onclick="answer('Caballo')">
  <div class="flipper">
    <div class="color3 box box-front">
      <img src="images/animaux/cheval.png" alt="cheval"/>
    </div>
  </div>
</div>

</div>


<script>

  
  var listAnimals = ["Perro","Gato","Tortuga","Pez","Conejo","Vaca","Ardilla","Mono","Pájaro","Caballo"];
  let findAnimal = false;
  let randAnimal = listAnimals[Math.round(Math.random()*(listAnimals.length-1))];

  function getRandomAnimal(){
    randAnimal = listAnimals[Math.round(Math.random()*(listAnimals.length-1))];
  }

  function start(){
    if (!findAnimal){
      speak(randAnimal,'es');
    }else{
      getRandomAnimal();
      speak(randAnimal,'es');
    }
    
  }

  function answer(text){
    if (text==randAnimal){
      findAnimal = true;
      speak("Buena respuesta !", 'es');
    }else{
      speak("Respuesta incorrecta, empieza de nuevo ..", 'es');
    }
  }

    var voices = speechSynthesis.getVoices();

    function speak(text, lang) {
    var msg = new SpeechSynthesisUtterance();
    msg.text = text;
    console.log("message = " + text);

    // Set les attributsyo
    msg.volume = parseFloat(0.2);
    msg.rate = parseFloat(1);
    msg.pitch = parseFloat(0.7);

    // Trouver la voix en fonction de la langue
    var voices = window.speechSynthesis.getVoices();
    var selectedVoice = voices.find(function(voice) {
        return voice.lang.startsWith(lang);
    });

    if (selectedVoice) {
      msg.voice = selectedVoice;
      window.speechSynthesis.speak(msg);
      console.log("on est sensé entendre quelque chose");
    } else {
      alert("Voix non trouvée pour la langue spécifiée");
    }
}

        document.getElementById("languageSelect").addEventListener("change", function() {
            var selectedValue = this.value;
            switch (selectedValue) {
                case "en":
                    window.location.href = "animaux_reconnaissance_anglais.html";
                    break;
                case "es":
                    break;
                default:
                    // Par défaut, rediriger vers une page par défaut
                    window.location.href = "index.html";
            }
        });


    </script>


</body>
</html>